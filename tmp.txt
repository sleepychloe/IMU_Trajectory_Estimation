[ref 없이 파라미터를 고르는 전략]

오리엔테이션 예측 로직:
        1.자이로 적분(고주파, 빠른 변화에 강함) 으로 자세를 예측
        2.가속도(중력 방향, 저주파, 드리프트를 잡음) 로 천천히 correction하는 구조

한계:
        가속도는 움직일 때(선형가속 섞일 때) 중력이 아니라 “중력+가속”을 보여서 오염


해결을 위한 물리 제약:

        1. 정지(still) 때는 ||ω|| ≈ 0, ||a|| ≈ g0
                -> 바디 좌표에서 본 중력 방향이 거의 시간에 대해 일정해야 함
        2. 회전/가속이 큰 구간은 가속도 기반 보정이 위험
                -> 게이트로 줄여야 함

여기서 해야할 것:
        1. σ(게이트)들: 언제 믿고 언제 믿지 않을지를 데이터 분포로 정함
        2. K: 정지에서 얼마나 흔들림 없이 안정적인지로 정함


==========================================================================================

ft. detect_still_segments

코드가 하는 일: 정지 구간 자동 탐지
        wn = ||w||          # gyro magnitude
        acc_resid = | ||a|| - g0 |
        raw_mask = (wn < omega_thr) & (acc_resid < acc_thr)
        still_mask = smooth(raw_mask)
        run = longest contiguous True segment
        
1. 정지 구간이 잡히는 이유:
        정지(또는 거의 정지)시
                1. 각속도 크기 ||ω||가 작다 → 자이로 회전 없음
                2. 가속도 크기 ||a||가 g0 근처다 → 선형가속이 거의 없음
        1 ∩ 2: 정지 후보

2. smoothing(디바운스) 하는 이유:
        문제:
                (센서 노이즈 때문에) 한두 샘플이 튀면서 raw_mask가 깜빡깜빡할 수 있음
                → 정지 구간이 끊겨서 제대로된 연속 구간을 못 찾음
        해결:
                majority vote(윈도우 내 과반수 True면 True)로 잠깐 튄 outlier는 무시

3. longest run을 쓰는 이유:
        ref 없이 tau(K)를 고르려면 확실히 정지인 구간 하나만 있어도 충분.
        가장 긴 정지 구간은 대체로 가장 안정적, 표본이 많아서 통계가 안정적임

==========================================================================================

ft. suggest_sigma